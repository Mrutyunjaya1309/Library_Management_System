<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Books - Library Management System</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav>
        <ul>
            <li><a href="/">Login</a></li>
            <li><a href="/register">Register</a></li>
            <li><a href="/add_book">Add Book</a></li>
            <li><a href="/search_book">Search Book</a></li>
            <li><a href="/view_books">View Books</a></li>
        </ul>
    </nav>
    <main>
        <div class="container">
            <h2>View All Books</h2>
            <div id="search-info"></div>
            <div id="book-list">
                <!-- Books will be dynamically inserted here -->
            </div>
        </div>
    </main>
    <footer>
        <p>Library Management System Â© 2025</p>
    </footer>
    <script>
        // Function to get query parameter from URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Sample book data (replace with actual backend data)
        const allBooks = [
            { id: 1, title: "Harry Potter", author: "J.K. Rowling" },
            { id: 2, title: "The Great Gatsby", author: "F. Scott Fitzgerald" },
            { id: 3, title: "To Kill a Mockingbird", author: "Harper Lee" }
        ];

        // Function to display books
        function displayBooks(books, query) {
            const bookList = document.getElementById('book-list');
            const searchInfo = document.getElementById('search-info');
            
            // Clear previous content
            bookList.innerHTML = '';
            
            // Display search info if query exists
            if (query) {
                searchInfo.innerHTML = `<p>Search results for "${query}":</p>`;
            } else {
                searchInfo.innerHTML = '<p>All books in the library:</p>';
            }
            
            // If no books match
            if (books.length === 0) {
                bookList.innerHTML = '<p>No books found.</p>';
                return;
            }
            
            // Create book list
            const ul = document.createElement('ul');
            books.forEach(book => {
                const li = document.createElement('li');
                li.textContent = `${book.title} by ${book.author}`;
                ul.appendChild(li);
            });
            bookList.appendChild(ul);
        }

        // Main logic
        document.addEventListener('DOMContentLoaded', () => {
            const query = getQueryParam('query');
            let filteredBooks = allBooks;
            
            // Filter books if query exists
            if (query) {
                const lowerQuery = query.toLowerCase();
                filteredBooks = allBooks.filter(book =>
                    book.title.toLowerCase().includes(lowerQuery) ||
                    book.author.toLowerCase().includes(lowerQuery)
                );
            }
            
            // Display the books
            displayBooks(filteredBooks, query);
        });
    </script>
</body>
</html>